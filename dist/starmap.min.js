var CanvasTexture=function(cb){var canvas=document.createElement("canvas");return"function"==typeof cb&&cb(canvas),PIXI.Texture.fromCanvas(canvas)},Particle=function(position,app){"use strict";var radius=1.1*Math.random()+1,haloRadius=Math.ceil(20*radius),colour={red:255,green:255,blue:255};Math.random()>.7&&(colour.red=Math.round(100*Math.random()+55),colour.green=Math.round(100*Math.random()+55),colour.blue=255);var texture=new CanvasTexture(function(canvas){canvas.width=haloRadius,canvas.height=haloRadius;var ctx=canvas.getContext("2d");ctx.fillStyle="rgb("+colour.red+","+colour.green+","+colour.blue+")",ctx.beginPath(),ctx.arc(haloRadius/2,haloRadius/2,radius,0,360,!1),ctx.fill();var grd=ctx.createRadialGradient(haloRadius/2,haloRadius/2,radius,haloRadius/2,haloRadius/2,Math.ceil(haloRadius));grd.addColorStop(0,"rgba("+colour.red+","+colour.green+","+colour.blue+",0.05)"),grd.addColorStop(.3,"rgba("+colour.red+","+colour.green+","+colour.blue+",0)"),ctx.fillStyle=grd,ctx.beginPath(),ctx.arc(haloRadius/2,haloRadius/2,haloRadius,0,360,!1)}),sprite=new PIXI.Sprite(texture);sprite.blendMode=PIXI.BLEND_MODES.SCREEN,app.stage.addChild(sprite);var $scope={sprite:sprite,stage:app,radius:radius,acceleration:new Vector2,velocity:new Vector2(Math.random()-.5,Math.random()-.5),position:position,colour:{red:255,green:255,blue:255},init:function(){Math.random()>.7&&($scope.colour.red=Math.round(200*Math.random()+55),$scope.colour.green=Math.round(200*Math.random()+55),$scope.colour.blue=Math.round(200*Math.random()+55))},tick:function(){sprite.alpha=.4*Math.random()+.6,$scope.acceleration.set(Math.random()-.5,Math.random()-.5).scale(app.maxSpeed),$scope.acceleration.clampAbs(app.maxSpeed),$scope.velocity.add($scope.acceleration,.1),($scope.position.x+$scope.velocity.x>window.innerWidth||$scope.position.x+$scope.velocity.x<1)&&($scope.velocity.x*=-.9,$scope.acceleration.x*=-.9),($scope.position.y+$scope.velocity.y>window.innerHeight||$scope.position.y+$scope.velocity.y<1)&&($scope.velocity.y*=-.9,$scope.acceleration.y*=-.9),$scope.velocity.clampAbs(app.maxSpeed),$scope.position.add($scope.velocity,.1),sprite.position.x=$scope.position.x-haloRadius/2,sprite.position.y=$scope.position.y-haloRadius/2}};return $scope.init(),$scope},StarMap=function(width,height,starCount,threshold){"use strict";var renderer=PIXI.autoDetectRenderer(width,height,{backgroundColor:1443889});document.body.appendChild(renderer.view);var stage=new PIXI.Container,joinLines=new PIXI.Graphics;joinLines.blendMode=PIXI.BLEND_MODES.ADD;var backgroundTexture=new CanvasTexture(function(canvas){canvas.width=width,canvas.height=height;var ctx=canvas.getContext("2d"),grd=ctx.createRadialGradient(width/2,height/2,1,width/2,height/2,height);grd.addColorStop(0,"rgb(22,8,49)"),grd.addColorStop(.4,"rgb(22,8,49)"),grd.addColorStop(.6,"rgb(12,7,24)"),grd.addColorStop(1,"rgb(0,0,0)"),ctx.fillStyle=grd,ctx.fillRect(0,0,width,height)}),renderTexture=new PIXI.RenderTexture(renderer,width,height),renderTexture2=new PIXI.RenderTexture(renderer,width,height),backgroundSprite=new PIXI.Sprite(backgroundTexture),shadowSprite=new PIXI.Sprite(renderTexture),convolutionFilter=new PIXI.filters.ConvolutionFilter([.1,.4,.1,.4,0,.4,.1,.4,.1],width,height);shadowSprite.alpha=.49,shadowSprite.filters=[convolutionFilter],stage.addChild(backgroundSprite);var thresholdSquare=Math.pow(threshold,2),$scope={maxSpeed:10,width:width,height:height,stage:stage,joinLines:joinLines,nodes:[],init:function(){for(var x=0;starCount>x;x++){var p=new Particle(new Vector2(Math.random()*width,Math.random()*height),$scope);$scope.addNode(p)}stage.addChild(joinLines),stage.addChild(shadowSprite)},addNode:function(node){$scope.nodes.push(node)},removeNode:function(node){$scope.nodes.splice($scope.nodes.indexOf(node),1)},tick:function(){var distance;requestAnimationFrame($scope.tick),joinLines.clear(),$scope.nodes.forEach(function(node,i){node.tick(),$scope.nodes.slice(i).forEach(function(joinNode){var d2=joinNode.position.distanceSquare(node.position);if(thresholdSquare>d2){distance=Math.sqrt(d2);var alpha=(threshold-distance)/threshold*.4+.05*Math.random();joinLines.lineStyle(alpha*(node.radius+joinNode.radius)*6,56319,alpha),joinLines.moveTo(node.position.x,node.position.y),joinLines.lineTo(joinNode.position.x,joinNode.position.y)}})}),backgroundSprite.alpha=0,joinLines.alpha=0,renderTexture2.render($scope.stage,null,!0),joinLines.alpha=1,backgroundSprite.alpha=1;var temp=renderTexture;renderTexture=renderTexture2,renderTexture2=temp,shadowSprite.texture=renderTexture,renderer.render($scope.stage)}};return $scope.init(),$scope},Vector2=function(x,y){"use strict";x||(x=0),y||(y=0);var $scope={x:x,y:y,add:function(vector,scale){return scale=scale||1,$scope.x+=vector.x*scale,$scope.y+=vector.y*scale,$scope},set:function(x,y){return $scope.x=x,$scope.y=y,$scope},scale:function(multiplier){return $scope.x*=multiplier,$scope.y*=multiplier,$scope},clamp:function(min,max){return $scope.x=Math.min(Math.max($scope.x,min),max),$scope.y=Math.min(Math.max($scope.y,min),max),$scope},clampAbs:function(val){return $scope.clamp(-val,val),$scope},distance:function(vector){return Math.sqrt($scope.distanceSquare(vector))},distanceSquare:function(vector){var dX=Math.pow(vector.x-$scope.x,2),dY=Math.pow(vector.y-$scope.y,2);return dX+dY}};return $scope};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNhbnZhc1RleHR1cmUuanMiLCJQYXJ0aWNsZS5qcyIsIlN0YXJNYXAuanMiLCJWZWN0b3IyLmpzIl0sIm5hbWVzIjpbIkNhbnZhc1RleHR1cmUiLCJjYiIsImNhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIlBJWEkiLCJUZXh0dXJlIiwiZnJvbUNhbnZhcyIsIlBhcnRpY2xlIiwicG9zaXRpb24iLCJhcHAiLCJyYWRpdXMiLCJNYXRoIiwicmFuZG9tIiwiaGFsb1JhZGl1cyIsImNlaWwiLCJjb2xvdXIiLCJyZWQiLCJncmVlbiIsImJsdWUiLCJyb3VuZCIsInRleHR1cmUiLCJ3aWR0aCIsImhlaWdodCIsImN0eCIsImdldENvbnRleHQiLCJmaWxsU3R5bGUiLCJiZWdpblBhdGgiLCJhcmMiLCJmaWxsIiwiZ3JkIiwiY3JlYXRlUmFkaWFsR3JhZGllbnQiLCJhZGRDb2xvclN0b3AiLCJzcHJpdGUiLCJTcHJpdGUiLCJibGVuZE1vZGUiLCJCTEVORF9NT0RFUyIsIlNDUkVFTiIsInN0YWdlIiwiYWRkQ2hpbGQiLCIkc2NvcGUiLCJhY2NlbGVyYXRpb24iLCJWZWN0b3IyIiwidmVsb2NpdHkiLCJpbml0IiwidGljayIsImFscGhhIiwic2V0Iiwic2NhbGUiLCJtYXhTcGVlZCIsImNsYW1wQWJzIiwiYWRkIiwieCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJ5IiwiaW5uZXJIZWlnaHQiLCJTdGFyTWFwIiwic3RhckNvdW50IiwidGhyZXNob2xkIiwicmVuZGVyZXIiLCJhdXRvRGV0ZWN0UmVuZGVyZXIiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJ2aWV3IiwiQ29udGFpbmVyIiwiam9pbkxpbmVzIiwiR3JhcGhpY3MiLCJBREQiLCJiYWNrZ3JvdW5kVGV4dHVyZSIsImZpbGxSZWN0IiwicmVuZGVyVGV4dHVyZSIsIlJlbmRlclRleHR1cmUiLCJyZW5kZXJUZXh0dXJlMiIsImJhY2tncm91bmRTcHJpdGUiLCJzaGFkb3dTcHJpdGUiLCJjb252b2x1dGlvbkZpbHRlciIsImZpbHRlcnMiLCJDb252b2x1dGlvbkZpbHRlciIsInRocmVzaG9sZFNxdWFyZSIsInBvdyIsIm5vZGVzIiwicCIsImFkZE5vZGUiLCJub2RlIiwicHVzaCIsInJlbW92ZU5vZGUiLCJzcGxpY2UiLCJpbmRleE9mIiwiZGlzdGFuY2UiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjbGVhciIsImZvckVhY2giLCJpIiwic2xpY2UiLCJqb2luTm9kZSIsImQyIiwiZGlzdGFuY2VTcXVhcmUiLCJzcXJ0IiwibGluZVN0eWxlIiwibW92ZVRvIiwibGluZVRvIiwicmVuZGVyIiwidGVtcCIsInZlY3RvciIsIm11bHRpcGxpZXIiLCJjbGFtcCIsIm1pbiIsIm1heCIsInZhbCIsImRYIiwiZFkiXSwibWFwcGluZ3MiOiJBQU9BLEdBQUFBLGVBQUEsU0FBQUMsSUFDQSxHQUFBQyxRQUFBQyxTQUFBQyxjQUFBLFNBRUEsT0FEQSxrQkFBQUgsS0FBQUEsR0FBQUMsUUFDQUcsS0FBQUMsUUFBQUMsV0FBQUwsU0NMQU0sU0FBQSxTQUFBQyxTQUFBQyxLQUNBLFlBQ0EsSUFBQUMsUUFBQSxJQUFBQyxLQUFBQyxTQUFBLEVBQ0FDLFdBQUFGLEtBQUFHLEtBQUEsR0FBQUosUUFDQUssUUFDQUMsSUFBQSxJQUNBQyxNQUFBLElBQ0FDLEtBQUEsSUFFQVAsTUFBQUMsU0FBQSxLQUNBRyxPQUFBQyxJQUFBTCxLQUFBUSxNQUFBLElBQUFSLEtBQUFDLFNBQUEsSUFDQUcsT0FBQUUsTUFBQU4sS0FBQVEsTUFBQSxJQUFBUixLQUFBQyxTQUFBLElBQ0FHLE9BQUFHLEtBQUEsSUFHQSxJQUFBRSxTQUFBLEdBQUFyQixlQUFBLFNBQUFFLFFBQ0FBLE9BQUFvQixNQUFBUixXQUNBWixPQUFBcUIsT0FBQVQsVUFFQSxJQUFBVSxLQUFBdEIsT0FBQXVCLFdBQUEsS0FDQUQsS0FBQUUsVUFBQSxPQUFBVixPQUFBQyxJQUFBLElBQUFELE9BQUFFLE1BQUEsSUFBQUYsT0FBQUcsS0FB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LElBQUEsU0FBQXNELE9BQUF6RCxPQUlBLE1BSEFBLE9BQUFBLE9BQUEsRUFDQVIsT0FBQVksR0FBQXFELE9BQUFyRCxFQUFBSixNQUNBUixPQUFBZSxHQUFBa0QsT0FBQWxELEVBQUFQLE1BQ0FSLFFBRUFPLElBQUEsU0FBQUssRUFBQUcsR0FHQSxNQUZBZixRQUFBWSxFQUFBQSxFQUNBWixPQUFBZSxFQUFBQSxFQUNBZixRQUVBUSxNQUFBLFNBQUEwRCxZQUdBLE1BRkFsRSxRQUFBWSxHQUFBc0QsV0FDQWxFLE9BQUFlLEdBQUFtRCxXQUNBbEUsUUFFQW1FLE1BQUEsU0FBQUMsSUFBQUMsS0FHQSxNQUZBckUsUUFBQVksRUFBQXhDLEtBQUFnRyxJQUFBaEcsS0FBQWlHLElBQUFyRSxPQUFBWSxFQUFBd0QsS0FBQUMsS0FDQXJFLE9BQUFlLEVBQUEzQyxLQUFBZ0csSUFBQWhHLEtBQUFpRyxJQUFBckUsT0FBQWUsRUFBQXFELEtBQUFDLEtBQ0FyRSxRQUVBVSxTQUFBLFNBQUE0RCxLQUVBLE1BREF0RSxRQUFBbUUsT0FBQUcsSUFBQUEsS0FDQXRFLFFBRUFrRCxTQUFBLFNBQUFlLFFBQ0EsTUFBQTdGLE1BQUF1RixLQUFBM0QsT0FBQTBELGVBQUFPLFVBRUFQLGVBQUEsU0FBQU8sUUFDQSxHQUFBTSxJQUFBbkcsS0FBQXFFLElBQUF3QixPQUFBckQsRUFBQVosT0FBQVksRUFBQSxHQUNBNEQsR0FBQXBHLEtBQUFxRSxJQUFBd0IsT0FBQWxELEVBQUFmLE9BQUFlLEVBQUEsRUFDQSxPQUFBd0QsSUFBQUMsSUFJQSxPQUFBeEUiLCJmaWxlIjoic3Rhcm1hcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqXG4gKiBAcGFyYW0gY2JcbiAqIEByZXR1cm5zIHtQSVhJLkJhc2VUZXh0dXJlfFBJWEkuVGV4dHVyZX1cbiAqIEBjb25zdHJ1Y3RvclxuICogQGF1dGhvciBBZGFtIEJlbnNvbiA8YWRhbUBwcmVjYXJpb3VzcGFudGhlci5uZXQ+XG4gKi9cbnZhciBDYW52YXNUZXh0dXJlID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGlmICh0eXBlb2YgY2IgPT0gJ2Z1bmN0aW9uJykgY2IoY2FudmFzKTtcbiAgICByZXR1cm4gUElYSS5UZXh0dXJlLmZyb21DYW52YXMoY2FudmFzKTtcbn07IiwiLyoqXG4gKlxuICogQGF1dGhvciBBZGFtIEJlbnNvbiA8YWRhbUBwcmVjYXJpb3VzcGFudGhlci5uZXQ+XG4gKi9cblxudmFyIFBhcnRpY2xlID0gZnVuY3Rpb24gKHBvc2l0aW9uLCBhcHApIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIHJhZGl1cyA9IE1hdGgucmFuZG9tKCkgKiAxLjEgKyAxO1xuICAgIHZhciBoYWxvUmFkaXVzID0gTWF0aC5jZWlsKHJhZGl1cyAqIDIwKTtcbiAgICB2YXIgY29sb3VyID0ge1xuICAgICAgICByZWQ6IDI1NSxcbiAgICAgICAgZ3JlZW46IDI1NSxcbiAgICAgICAgYmx1ZTogMjU1XG4gICAgfTtcbiAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNykge1xuICAgICAgICBjb2xvdXIucmVkID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwICsgNTUpO1xuICAgICAgICBjb2xvdXIuZ3JlZW4gPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAgKyA1NSk7XG4gICAgICAgIGNvbG91ci5ibHVlID0gMjU1O1xuICAgIH1cblxuICAgIHZhciB0ZXh0dXJlID0gbmV3IENhbnZhc1RleHR1cmUoZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICBjYW52YXMud2lkdGggPSBoYWxvUmFkaXVzO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGFsb1JhZGl1cztcbiAgICAgICAgLy9Db3JlXG4gICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2IoJyArIGNvbG91ci5yZWQgKyAnLCcgKyBjb2xvdXIuZ3JlZW4gKyAnLCcgKyBjb2xvdXIuYmx1ZSArICcpJztcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHguYXJjKGhhbG9SYWRpdXMgLyAyLCBoYWxvUmFkaXVzIC8gMiwgcmFkaXVzLCAwLCAzNjAsIGZhbHNlKTtcbiAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgLy9IYWxvXG4gICAgICAgIHZhciBncmQgPSBjdHguY3JlYXRlUmFkaWFsR3JhZGllbnQoaGFsb1JhZGl1cyAvIDIsIGhhbG9SYWRpdXMgLyAyLCByYWRpdXMsIGhhbG9SYWRpdXMgLyAyLCBoYWxvUmFkaXVzIC8gMiwgTWF0aC5jZWlsKGhhbG9SYWRpdXMpKTtcbiAgICAgICAgZ3JkLmFkZENvbG9yU3RvcCgwLCAncmdiYSgnICsgY29sb3VyLnJlZCArICcsJyArIGNvbG91ci5ncmVlbiArICcsJyArIGNvbG91ci5ibHVlICsgJywnICsgMC4wNSArICcpJyk7XG4gICAgICAgIGdyZC5hZGRDb2xvclN0b3AoMC4zLCAncmdiYSgnICsgY29sb3VyLnJlZCArICcsJyArIGNvbG91ci5ncmVlbiArICcsJyArIGNvbG91ci5ibHVlICsgJywwKScpO1xuXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBncmQ7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4LmFyYyhoYWxvUmFkaXVzIC8gMiwgaGFsb1JhZGl1cyAvIDIsIGhhbG9SYWRpdXMsIDAsIDM2MCwgZmFsc2UpO1xuICAgICAgICAvL2N0eC5maWxsKCk7XG4gICAgfSk7XG4gICAgdmFyIHNwcml0ZSA9IG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlKTtcbiAgICAvL3Nwcml0ZS5ibGVuZE1vZGUgPSBQSVhJLkJMRU5EX01PREVTLkFERDtcbiAgICBzcHJpdGUuYmxlbmRNb2RlID0gUElYSS5CTEVORF9NT0RFUy5TQ1JFRU47XG4gICAgLy9zcHJpdGUuYmxlbmRNb2RlID0gUElYSS5CTEVORF9NT0RFUy5IQVJEX0xJR0hUO1xuICAgIC8vc3ByaXRlLmJsZW5kTW9kZSA9IFBJWEkuQkxFTkRfTU9ERVMuU0NSRUVOO1xuICAgIGFwcC5zdGFnZS5hZGRDaGlsZChzcHJpdGUpO1xuXG4gICAgLy9hcHAuc3RhZ2UuYWRkQ2hpbGQoam9pbkxpbmVzKTtcbiAgICB2YXIgJHNjb3BlID0ge1xuICAgICAgICBzcHJpdGU6IHNwcml0ZSxcbiAgICAgICAgc3RhZ2U6IGFwcCxcbiAgICAgICAgcmFkaXVzOiByYWRpdXMsXG4gICAgICAgIGFjY2VsZXJhdGlvbjogbmV3IFZlY3RvcjIoKSxcbiAgICAgICAgdmVsb2NpdHk6IG5ldyBWZWN0b3IyKE1hdGgucmFuZG9tKCkgLSAwLjUsIE1hdGgucmFuZG9tKCkgLSAwLjUpLFxuICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICAgIGNvbG91cjoge1xuICAgICAgICAgICAgcmVkOiAyNTUsXG4gICAgICAgICAgICBncmVlbjogMjU1LFxuICAgICAgICAgICAgYmx1ZTogMjU1XG4gICAgICAgIH0sXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC43KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNvbG91ci5yZWQgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAyMDAgKyA1NSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNvbG91ci5ncmVlbiA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDIwMCArIDU1KTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuY29sb3VyLmJsdWUgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAyMDAgKyA1NSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHRpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vVHdpbmtsZVxuICAgICAgICAgICAgc3ByaXRlLmFscGhhID0gTWF0aC5yYW5kb20oKSAqIDAuNCArIDAuNjtcblxuICAgICAgICAgICAgLy9Nb3ZlXG4gICAgICAgICAgICAkc2NvcGUuYWNjZWxlcmF0aW9uLnNldChNYXRoLnJhbmRvbSgpIC0gMC41LCBNYXRoLnJhbmRvbSgpIC0gMC41KS5zY2FsZShhcHAubWF4U3BlZWQpO1xuICAgICAgICAgICAgJHNjb3BlLmFjY2VsZXJhdGlvbi5jbGFtcEFicyhhcHAubWF4U3BlZWQpO1xuXG4gICAgICAgICAgICAkc2NvcGUudmVsb2NpdHkuYWRkKCRzY29wZS5hY2NlbGVyYXRpb24sIDAuMSk7XG5cbiAgICAgICAgICAgIGlmICgkc2NvcGUucG9zaXRpb24ueCArICRzY29wZS52ZWxvY2l0eS54ID4gd2luZG93LmlubmVyV2lkdGggfHwgJHNjb3BlLnBvc2l0aW9uLnggKyAkc2NvcGUudmVsb2NpdHkueCA8IDEpIHtcbiAgICAgICAgICAgICAgICAvL0JvdW5jZSBYXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZlbG9jaXR5LnggKj0gLTAuOTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWNjZWxlcmF0aW9uLnggKj0gLTAuOTtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCRzY29wZS5wb3NpdGlvbi55ICsgJHNjb3BlLnZlbG9jaXR5LnkgPiB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgJHNjb3BlLnBvc2l0aW9uLnkgKyAkc2NvcGUudmVsb2NpdHkueSA8IDEpIHtcbiAgICAgICAgICAgICAgICAvL0JvdW5jZSBZXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZlbG9jaXR5LnkgKj0gLTAuOTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWNjZWxlcmF0aW9uLnkgKj0gLTAuOTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS52ZWxvY2l0eS5jbGFtcEFicyhhcHAubWF4U3BlZWQpO1xuICAgICAgICAgICAgJHNjb3BlLnBvc2l0aW9uLmFkZCgkc2NvcGUudmVsb2NpdHksIDAuMSk7XG4gICAgICAgICAgICBzcHJpdGUucG9zaXRpb24ueCA9ICRzY29wZS5wb3NpdGlvbi54IC0gKGhhbG9SYWRpdXMgLyAyKTtcbiAgICAgICAgICAgIHNwcml0ZS5wb3NpdGlvbi55ID0gJHNjb3BlLnBvc2l0aW9uLnkgLSAoaGFsb1JhZGl1cyAvIDIpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5pbml0KCk7XG4gICAgcmV0dXJuICRzY29wZTtcbn07IiwiLyoqXG4gKlxuICogQGF1dGhvciBBZGFtIEJlbnNvbiA8YWRhbUBwcmVjYXJpb3VzcGFudGhlci5uZXQ+XG4gKi9cblxudmFyIFN0YXJNYXAgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCwgc3RhckNvdW50LCB0aHJlc2hvbGQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIHJlbmRlcmVyID0gUElYSS5hdXRvRGV0ZWN0UmVuZGVyZXIod2lkdGgsIGhlaWdodCwge2JhY2tncm91bmRDb2xvcjogMHgxNjA4MzF9KTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHJlbmRlcmVyLnZpZXcpO1xuICAgIHZhciBzdGFnZSA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xuICAgIHZhciBqb2luTGluZXMgPSBuZXcgUElYSS5HcmFwaGljcygpO1xuICAgIGpvaW5MaW5lcy5ibGVuZE1vZGUgPSBQSVhJLkJMRU5EX01PREVTLkFERDtcblxuICAgIHZhciBiYWNrZ3JvdW5kVGV4dHVyZSA9IG5ldyBDYW52YXNUZXh0dXJlKGZ1bmN0aW9uIChjYW52YXMpIHtcbiAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgdmFyIGdyZCA9IGN0eC5jcmVhdGVSYWRpYWxHcmFkaWVudCh3aWR0aCAvIDIsIGhlaWdodCAvIDIsIDEsIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMiwgaGVpZ2h0KTtcbiAgICAgICAgZ3JkLmFkZENvbG9yU3RvcCgwLCAncmdiKDIyLDgsNDkpJyk7XG4gICAgICAgIGdyZC5hZGRDb2xvclN0b3AoMC40LCAncmdiKDIyLDgsNDkpJyk7XG4gICAgICAgIGdyZC5hZGRDb2xvclN0b3AoMC42LCAncmdiKDEyLDcsMjQpJyk7XG4gICAgICAgIGdyZC5hZGRDb2xvclN0b3AoMSwgJ3JnYigwLDAsMCknKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGdyZDtcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgIH0pO1xuXG4gICAgdmFyIHJlbmRlclRleHR1cmUgPSBuZXcgUElYSS5SZW5kZXJUZXh0dXJlKHJlbmRlcmVyLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB2YXIgcmVuZGVyVGV4dHVyZTIgPSBuZXcgUElYSS5SZW5kZXJUZXh0dXJlKHJlbmRlcmVyLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgIHZhciBiYWNrZ3JvdW5kU3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKGJhY2tncm91bmRUZXh0dXJlKTtcbiAgICB2YXIgc2hhZG93U3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKHJlbmRlclRleHR1cmUpO1xuICAgIHZhciBjb252b2x1dGlvbkZpbHRlciA9IG5ldyBQSVhJLmZpbHRlcnMuQ29udm9sdXRpb25GaWx0ZXIoW1xuICAgICAgICAwLjEsMC40LDAuMSxcbiAgICAgICAgMC40LDAuMCwwLjQsXG4gICAgICAgIDAuMSwwLjQsMC4xXG4gICAgXSwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICBzaGFkb3dTcHJpdGUuYWxwaGE9MC40OTtcbiAgICAvL3NoYWRvd1Nwcml0ZS5ibGVuZE1vZGUgPSBQSVhJLkJMRU5EX01PREVTLlNPRlRfTElHSFQ7XG5cbiAgICAvKiB2YXIgZmlsdGVyID0gbmV3IFBJWEkuZmlsdGVycy5Db252b2x1dGlvbkZpbHRlcihbXG4gICAgIDAuMSwwLjEsMC4xLFxuICAgICAwLjEsMC4yLDAuMSxcbiAgICAgMC4xLDAuMSwwLjFcbiAgICAgXSx3aWR0aCxoZWlnaHQpOyovXG4gICAgc2hhZG93U3ByaXRlLmZpbHRlcnMgPSBbY29udm9sdXRpb25GaWx0ZXJdO1xuICAgIC8vc2hhZG93U3ByaXRlLmJsZW5kTW9kZSA9IFBJWEkuQkxFTkRfTU9ERVMuT1ZFUkxBWTtcbiAgICAvL3NoYWRvd1Nwcml0ZS5ibGVuZE1vZGUgPSBQSVhJLkJMRU5EX01PREVTLkFERDtcbiAgICAvL3NoYWRvd1Nwcml0ZS5ibGVuZE1vZGUgPSBQSVhJLkJMRU5EX01PREVTLlNPRlRfTElHSFQ7XG4gICAgc3RhZ2UuYWRkQ2hpbGQoYmFja2dyb3VuZFNwcml0ZSk7XG5cblxuXG4gICAgdmFyIHRocmVzaG9sZFNxdWFyZSA9IE1hdGgucG93KHRocmVzaG9sZCwgMik7XG4gICAgdmFyICRzY29wZSA9IHtcbiAgICAgICAgbWF4U3BlZWQ6IDEwLFxuICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICBzdGFnZTogc3RhZ2UsXG4gICAgICAgIGpvaW5MaW5lczogam9pbkxpbmVzLFxuICAgICAgICBub2RlczogW10sXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgc3RhckNvdW50OyB4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcCA9IG5ldyBQYXJ0aWNsZShuZXcgVmVjdG9yMihNYXRoLnJhbmRvbSgpICogd2lkdGgsIE1hdGgucmFuZG9tKCkgKiBoZWlnaHQpLCAkc2NvcGUpO1xuICAgICAgICAgICAgICAgICRzY29wZS5hZGROb2RlKHApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdGFnZS5hZGRDaGlsZChqb2luTGluZXMpO1xuICAgICAgICAgICAgc3RhZ2UuYWRkQ2hpbGQoc2hhZG93U3ByaXRlKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkTm9kZTogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICRzY29wZS5ub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmVOb2RlOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgJHNjb3BlLm5vZGVzLnNwbGljZSgkc2NvcGUubm9kZXMuaW5kZXhPZihub2RlKSwgMSk7XG4gICAgICAgIH0sXG4gICAgICAgIHRpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkaXN0YW5jZTtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgkc2NvcGUudGljayk7XG4gICAgICAgICAgICBqb2luTGluZXMuY2xlYXIoKTtcbiAgICAgICAgICAgICRzY29wZS5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlLCBpKSB7XG4gICAgICAgICAgICAgICAgLy9QYXJ0aWNsZXNcbiAgICAgICAgICAgICAgICBub2RlLnRpY2soKTtcbiAgICAgICAgICAgICAgICAvL0pvaW4gbGluZXNcbiAgICAgICAgICAgICAgICAkc2NvcGUubm9kZXMuc2xpY2UoaSkuZm9yRWFjaChmdW5jdGlvbiAoam9pbk5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQyID0gam9pbk5vZGUucG9zaXRpb24uZGlzdGFuY2VTcXVhcmUobm9kZS5wb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkMiA8IHRocmVzaG9sZFNxdWFyZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhID0gKCgodGhyZXNob2xkIC0gZGlzdGFuY2UpIC8gdGhyZXNob2xkKSAqIDAuNCkgKyAoTWF0aC5yYW5kb20oKSAqIDAuMDUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgam9pbkxpbmVzLmxpbmVTdHlsZShhbHBoYSAqIChub2RlLnJhZGl1cyArIGpvaW5Ob2RlLnJhZGl1cykgKiA2LCAweDAwZGJmZiwgYWxwaGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgam9pbkxpbmVzLm1vdmVUbyhub2RlLnBvc2l0aW9uLngsIG5vZGUucG9zaXRpb24ueSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqb2luTGluZXMubGluZVRvKGpvaW5Ob2RlLnBvc2l0aW9uLngsIGpvaW5Ob2RlLnBvc2l0aW9uLnkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy9SZW5kZXIgc3RhcnMgdG8gdGV4dHVyZSwgYnV0IG1vdmUgaXQgb2Zmc2NyZWVuIChmb3IgbmV4dCBmcmFtZSlcbiAgICAgICAgICAgIGJhY2tncm91bmRTcHJpdGUuYWxwaGEgPSAwO1xuICAgICAgICAgICAgam9pbkxpbmVzLmFscGhhID0gMDtcbiAgICAgICAgICAgIHJlbmRlclRleHR1cmUyLnJlbmRlcigkc2NvcGUuc3RhZ2UsIG51bGwsIHRydWUpO1xuICAgICAgICAgICAgam9pbkxpbmVzLmFscGhhID0gMTtcbiAgICAgICAgICAgIGJhY2tncm91bmRTcHJpdGUuYWxwaGEgPSAxO1xuXG4gICAgICAgICAgICAvL0JyaW5nIHByZXZpb3VzIGZyYW1lcyBzdGFycyBvbnNjcmVlbiBmb3IgZ2xvd3NcbiAgICAgICAgICAgIHZhciB0ZW1wID0gcmVuZGVyVGV4dHVyZTtcbiAgICAgICAgICAgIHJlbmRlclRleHR1cmUgPSByZW5kZXJUZXh0dXJlMjtcbiAgICAgICAgICAgIHJlbmRlclRleHR1cmUyID0gdGVtcDtcbiAgICAgICAgICAgIHNoYWRvd1Nwcml0ZS50ZXh0dXJlID0gcmVuZGVyVGV4dHVyZTtcblxuICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKCRzY29wZS5zdGFnZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgICRzY29wZS5pbml0KCk7XG4gICAgcmV0dXJuICRzY29wZTtcbn07IiwiLyoqXG4gKlxuICogQGF1dGhvciBBZGFtIEJlbnNvbiA8YWRhbUBwcmVjYXJpb3VzcGFudGhlci5uZXQ+XG4gKi9cblxuLyoqXG4gKlxuICogQHBhcmFtIHtpbnR9IFt4XVxuICogQHBhcmFtIHtpbnR9IFt5XVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZhciBWZWN0b3IyID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgaWYgKCF4KXggPSAwO1xuICAgIGlmICgheSl5ID0gMDtcbiAgICB2YXIgJHNjb3BlID0ge1xuICAgICAgICB4OiB4LFxuICAgICAgICB5OiB5LFxuICAgICAgICBhZGQ6IGZ1bmN0aW9uICh2ZWN0b3IsIHNjYWxlKSB7XG4gICAgICAgICAgICBzY2FsZSA9IHNjYWxlIHx8IDE7XG4gICAgICAgICAgICAkc2NvcGUueCArPSB2ZWN0b3IueCAqIHNjYWxlO1xuICAgICAgICAgICAgJHNjb3BlLnkgKz0gdmVjdG9yLnkgKiBzY2FsZTtcbiAgICAgICAgICAgIHJldHVybiAkc2NvcGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgICAgICRzY29wZS54ID0geDtcbiAgICAgICAgICAgICRzY29wZS55ID0geTtcbiAgICAgICAgICAgIHJldHVybiAkc2NvcGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNjYWxlOiBmdW5jdGlvbiAobXVsdGlwbGllcikge1xuICAgICAgICAgICAgJHNjb3BlLnggKj0gbXVsdGlwbGllcjtcbiAgICAgICAgICAgICRzY29wZS55ICo9IG11bHRpcGxpZXI7XG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlO1xuICAgICAgICB9LFxuICAgICAgICBjbGFtcDogZnVuY3Rpb24gKG1pbiwgbWF4KSB7XG4gICAgICAgICAgICAkc2NvcGUueCA9IE1hdGgubWluKE1hdGgubWF4KCRzY29wZS54LCBtaW4pLCBtYXgpO1xuICAgICAgICAgICAgJHNjb3BlLnkgPSBNYXRoLm1pbihNYXRoLm1heCgkc2NvcGUueSwgbWluKSwgbWF4KTtcbiAgICAgICAgICAgIHJldHVybiAkc2NvcGU7XG4gICAgICAgIH0sXG4gICAgICAgIGNsYW1wQWJzOiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAkc2NvcGUuY2xhbXAoLXZhbCwgdmFsKTtcbiAgICAgICAgICAgIHJldHVybiAkc2NvcGU7XG4gICAgICAgIH0sXG4gICAgICAgIGRpc3RhbmNlOiBmdW5jdGlvbiAodmVjdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KCRzY29wZS5kaXN0YW5jZVNxdWFyZSh2ZWN0b3IpKTtcbiAgICAgICAgfSxcbiAgICAgICAgZGlzdGFuY2VTcXVhcmU6IGZ1bmN0aW9uICh2ZWN0b3IpIHtcbiAgICAgICAgICAgIHZhciBkWCA9IE1hdGgucG93KHZlY3Rvci54IC0gJHNjb3BlLngsIDIpO1xuICAgICAgICAgICAgdmFyIGRZID0gTWF0aC5wb3codmVjdG9yLnkgLSAkc2NvcGUueSwgMik7XG4gICAgICAgICAgICByZXR1cm4gZFggKyBkWTtcbiAgICAgICAgfVxuXG4gICAgfTtcbiAgICByZXR1cm4gJHNjb3BlO1xufTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
